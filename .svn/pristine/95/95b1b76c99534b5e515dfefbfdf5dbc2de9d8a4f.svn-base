<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml">

    <ui:define name="title">Aniversariantes</ui:define>

    <ui:define name="head">
        <style type="text/css">
            .ui-selectoneradio.ui-grid-responsive .ui-grid-col-4, .ui-selectmanycheckbox.ui-grid-responsive .ui-grid-col-4{
                padding-bottom: 10px;
            }
            .layout-wrapper .layout-main {
                margin-left: 65px;
                padding: 5px;
                -moz-transition: margin-left 0.3s;
                -o-transition: margin-left 0.3s;
                -webkit-transition: margin-left 0.3s;
                transition: margin-left 0.3s;
            }
            .ui-dialog .ui-dialog-title{
                font-size: 13px!important;
                float:left;
                margin:.3em 16px .1em 0;
            }

            .tdCss {
                font-size: 13px;
                color: #1976d2!important;
                padding-bottom: 5px;
            }
            .ui-button{
                font-size: 10px;
            }
            .divFooterRed{
                background-color: #DC143C!important;
                width: 400px;
                padding: 8px;
                height: 8px;
                color: #FFFFFF;
                pointer-events: none;
                display: block;
                border: black solid;
            }
            .divFalta{
                /*border-radius: 0px 0px 5px 5px;*/
                /*position: absolute;*/
                /*display: block;*/
            }
            .divFooterRoxo{
                background-color: #9370DB!important;
                width: 400px;
                padding: 8px;
                height: 8px;
                color: #FFFFFF;
                pointer-events: none;
                display: block;
                border: black solid;
            }
            .marginTopLabelDiv{
                margin-top: -2%;
            }
            .divLabelFooterLeft{
                float: left;
                padding:2px;
                font-size: 12px;
                margin-top: -2%;
            }
            .divLabelFooterRight{
                float: right;
                padding:2px;
                font-size: 12px;
                margin-top: -2%;
            }
            /* Works on Firefox */
            * {
                scrollbar-width:thin;
                scrollbar-color:#D3D3D3;
            }

            /* Works on Chrome, Edge, and Safari */
            *::-webkit-scrollbar {
                width: 8px;
            }

            *::-webkit-scrollbar-track {
                background: white;
            }

            *::-webkit-scrollbar-thumb {
                background-color: #D3D3D3;
                border-radius: 20px;
            }
            /*div {*/
            /*    border: 1px solid red;*/
            /*}*/

            table {
                border-collapse: separate;
                border-spacing: 0px;
                /*margin-top: -8px;*/
            }

            td {
                /*border: 1px solid green;*/
                /*border-left-width: 0;*/
                /*min-width: 120px;*/
                /*height: 14px;*/
            }

            td:first-child {
                border-left-width: 1px;
            }
            .div_main{
                background-color: #FFFFFF;
                color: black;
                border-radius: 0px 10px 10px 0px;
                width: 99%;
                display: flex;
                flex-direction: row;
                margin: 6px;
            }

            .div_main:hover{
                /*background-color: #ECEFF1;*/
                pointer-events: visible;
                box-shadow: 0px 0px 8px #7e7f81;
            }
            .flex1 > div{
                margin: 0;
                align-items: start;
                /*align-content: center;*/
                /*align-items: center;*/
            }
            .flex1{
                display: flex;
                flex-direction: column;
                justify-content: left;
                align-items: start;

                /*align-items: center;*/
            }
            .flex2 > div{
                margin: 0;
                align-items: end;
                /*align-content: center;*/
                /*align-items: center;*/
            }
            .flex2{
                display: flex;
                flex-direction: column;
                justify-content: left;
                padding: 15px;
                align-items: end;
                /*align-items: center;*/
            }







            .shadow{
                -webkit-box-shadow: 0px 10px 13px -7px #000000, 50px 50px 18px 44px rgba(0,0,0,0);
                box-shadow: 0px 10px 13px -7px #000000, 50px 50px 18px 44px rgba(0,0,0,0);
            }
            .iconSelect{

            }
            .iconUnselect{
                background-color: #7e7f81;
            }
            .breakDiv{
                flex-basis: 100%;
                height: 0;
            }
            .styleBox{
                padding: 0 !important;
                border-radius: 10px;
                box-shadow: 0px 0px 8px #666;
                text-align: center;
                width: 230px;
            }
            .ui-button.ui-widget.ui-state-default.ui-corner-all.ui-button-text-icon-left{
                border-radius: 3px;
            }
            .btnMenor90 {
                transform: scale(0.85); /* (110% zoom) */
            }
            .btnMenor90 .ui-button-text {
                letter-spacing: 0.3px !important;
            }
            .layout-wrapper .layout-breadcrumb {
                background-color: #ffffff;
                box-shadow: inset 0 -2px 4px 0 rgb(0 0 0 / 14%);
                -webkit-box-shadow: inset 0 -2px 4px 0 rgb(0 0 0 / 14%);
                -moz-box-shadow: inset 0 -2px 4px 0 rgba(0, 0, 0, 0.14);
                min-height: 38px;
                width: 100%;
                border-radius: 6px;
            }body, html{
                 height: 100%;
             }

            body{
                background-color: blue;
            }

            .menu{
                background-color: red;
                height: 100%;
                width: 250px;
            }
            .container {
                display: flex;                  /* establish flex container */
                flex-direction: row;
                width: 100%;/* default value; can be omitted */ /* default value; can be omitted */
                justify-content: space-between; /* switched from default (flex-start, see below) */
                align-content: center;
                /*align-items: center;*/

            }
            .container > div {
                width: 100%;
                /*border: 2px dashed red;*/
            }
            .img-arredondada {
                padding: 4px;
                border-radius: 50%;
                background-position: -15px -15px;
                height: 60px;
                width: 60px;

            }
            .var{
                align-content: center;
                align-items: center;
            }
        </style>
        <script>
            PrimeFaces.locales['pt_BR'] = {
                closeText: 'Fechar',
                prevText: 'Anterior',
                nextText: 'Próximo',
                currentText: 'Começo',
                monthNames: ['Janeiro','Fevereiro','Março','Abril','Maio','Junho','Julho','Agosto','Setembro','Outubro','Novembro','Dezembro'],
                monthNamesShort: ['Jan','Fev','Mar','Abr','Mai','Jun', 'Jul','Ago','Set','Out','Nov','Dez'],
                dayNames: ['Domingo','Segunda','Terça','Quarta','Quinta','Sexta','Sábado'],
                dayNamesShort: ['Dom','Seg','Ter','Qua','Qui','Sex','Sáb'],
                dayNamesMin: ['D','S','T','Q','Q','S','S'],
                weekHeader: 'Semana',
                firstDay: 1,
                isRTL: false,
                showMonthAfterYear: false,
                yearSuffix: '',
                timeOnlyTitle: 'Só Horas',
                timeText: 'Tempo',
                hourText: 'Hora',
                minuteText: 'Minuto',
                secondText: 'Segundo',
                currentText: 'Data Atual',
                ampm: false,
                month: 'Mês',
                week: 'Semana',
                day: 'Dia',
                allDayText : 'Todo Dia'
            };
        </script>
    </ui:define>
    <ui:define name="content">

        <h:body>
            <p:remoteCommand name="rmtAniversariante"
                             process="@this"
                             actionListener="#{aniversarianteFaces.populaListaAniversariantes}"
                             autoRun="true"
                             update="form:pnlGeral"
                             onstart="PF('mpProc').show();"
                             oncomplete="PF('mpProc').hide();"/>
            <h:form id="form">
                <br/>
                <br/>
                <br/>
                <br/>
                <p:growl id="erro" showDetail="true"/>
                <p:outputPanel id="pnlGeral">
                    <div class="layout-breadcrumb">
                        <div style="padding: 4px; color: #999999;justify-content: center;align-items: center;" >
                            <i class="fa fa-users" style="font-size: 23px;"/>
                            <p:spacer width="3px"/>
                            <p:outputLabel value="Aniversariantes" style="font-family: 'Century Gothic'; font-size: 16px;"/>
                        </div>
                    </div>
                    <p:spacer height="3px"/>
                    <table align="center" cellpadding="5" cellspacing="2" border="0">
                        <tr>
                            <td align="center">
                                <div style="width: 400px; height: auto; box-shadow: 0px 0px 12px #666; border: none; background-color: transparent;border-radius: 5px 5px 5px 5px;">
                                    <div class="background-colorTheme" style="width: auto;height: 20px;text-align: center;padding: 8px;color: #FFFFFF; border-radius: 5px 5px 0px 0px;">
                                        <div style="float: left">
                                            <p:commandLink onstart="PF('mpProc').show();"
                                                           title="Adicionar"
                                                           onclick="PF('mpProc').show();"
                                                           style="color: #FFFFFF;float: left"
                                                           actionListener="#{aniversarianteFaces.doAddAniversariante}"
                                                           update=":formCadAniversario:pnlCadAniversario"
                                                           oncomplete="PF('mpProc').hide();PF('modalCadAniversario').show();">
                                                <i class="fa fa-plus" style="font-size: 15px;"/>
                                            </p:commandLink>
                                        </div>
                                        <div style="float: right">
                                            <label style="color: #FFFFFF">Pesquisar:</label>
                                            <p:inputText value="#{aniversarianteFaces.parametroBusca}"
                                                         size="10"
                                                         valueChangeListener="#{aniversarianteFaces.changeParam}"
                                                         style="color: white;
                                                         font-size: 13px;">
                                                <p:ajax process="@this"
                                                        event="valueChange"
                                                        onstart="PF('mpProc').show();"
                                                        update="pnlListaAniversariantes"
                                                        listener="#{aniversarianteFaces.populaListaAniversariantes}"
                                                        oncomplete="PF('mpProc').hide();"/>
                                            </p:inputText>
                                            <p:spacer width="2px"/>
                                            <p:commandLink onstart="PF('mpProc').show();"
                                                           process="@this"
                                                           update="pnlListaAniversariantes"
                                                           actionListener="#{aniversarianteFaces.populaListaAniversariantes}"
                                                           oncomplete="PF('mpProc').hide();"
                                                           title="Pesquisar"
                                                           style="color: #FFFFFF;float: right">
                                                <i class="fa fa-search" style="font-size: 15px;"/>
                                            </p:commandLink>
                                        </div>
                                    </div>
                                    <div style="background-color: #F0F8FF!important;
                                    width: auto;
                                    height: 400px;
                                    padding: 8px;
                                    justify-content: center;
                                    align-items: center;
                                    overflow: auto;
                                    border-radius: 5px 5px 10px 10px;
                                    color: #FFFFFF;">
                                        <p:outputPanel id="pnlListaAniversariantes">
                                            <p:repeat value="#{aniversarianteFaces.listaAniversariantes}" var="item">
                                                <div style="background-color: #1ab394;float: left; border-radius: 10px 0px 0px 10px;width: 4px; height: 64px;">
                                                </div>
                                                <div style="width: auto; height: 60px; padding: 2px;" class="div_main">
                                                    <div>
                                                        <p:commandLink
                                                                icon="ui-icon-pencil"
                                                                title="Atualizar foto"
                                                                styleClass="btnMenor90"
                                                                onclick="PF('mpProc').show();"
                                                                process="@this"
                                                                update=":formPicturesChange:pnlPicturesChange"
                                                                oncomplete="PF('mpProc').hide();PF('ovlPicturesChange').show();">
                                                        <p:graphicImage id="imgUserPerfil"
                                                                        cache="false"
                                                                        styleClass="img-arredondada"
                                                                        rendered="#{aniversarianteFaces.existeFoto}"
                                                                        value="#{aniversarianteFaces.retornaFoto(item[3].aniFoto)}"/>

                                                        <p:graphicImage rendered="#{!aniversarianteFaces.existeFoto}"
                                                                        name="images/semfoto.png"
                                                                        styleClass="img-arredondada"
                                                                        library="barcelona-layout" />
                                                        </p:commandLink>
                                                        <f:setPropertyActionListener value="#{item[3]}"
                                                                                     target="#{aniversarianteFaces.aniversarianteSelected}"/>
                                                    </div>

                                                    <div class="container">
                                                        <div class="flex1">
                                                            <div style="font-size: 13px;font-weight: bold;padding: 2px;">
                                                                <p:outputLabel value="#{usuarioFaces.transformTextInicialMaiusculo(item[3].aniNome)}"/>
                                                            </div>
                                                            <div style="font-size: 12px;color:#6a6a7d;padding: 2px;">
                                                                <p:outputLabel value=" #{gastoFaces.dataExtensao(item[3].aniDataAniversario)}"/>
                                                            </div>
                                                            <div style="font-size: 12px;color:#6a6a7d; padding: 2px;">
                                                                <p:outputLabel rendered="#{item[0] > 1}" value="Faltam #{item[0]} dias"/>
                                                                <p:outputLabel rendered="#{item[0] == 1}" value="Falta #{item[0]} dia"/>
                                                                <p:outputLabel rendered="#{item[0] == 0}" value="Seu aniversario é hoje!"/>
                                                            </div>
                                                        </div>

                                                        <div class="flex2">
                                                            <div style=" font-size: 16px;font-weight: bold;">
                                                                <p:outputLabel value="#{item[1]}" style="color: #DC143C;"/>
                                                                <p:spacer width="2px"/>
                                                                <i class="fa fa-arrow-right" title="fazer" style="font-size: 12px; color: #c7c7c7;"/>
                                                                <p:spacer width="2px"/>
                                                                <p:outputLabel value="#{item[2]}" style="color: #2E7D32;"/>
                                                            </div>
                                                            <div style="font-size: 12px;font-weight: bold;">
                                                                <p:commandLink
                                                                        title="Alterar"
                                                                        onclick="PF('mpProc').show();"
                                                                        process="@this"
                                                                        style="width: 8%"
                                                                        update=":formCadAniversario:pnlCadAniversario"
                                                                        oncomplete="PF('mpProc').hide();PF('modalCadAniversario').show();">
                                                                    <i class="fa fa-pencil" style="font-size: 15px; color: #A9A9A9"/>
                                                                    <f:setPropertyActionListener value="#{item[3]}" target="#{aniversarianteFaces.aniversarianteSelected}"/>
                                                                </p:commandLink>
                                                                <p:spacer width="2px"/>
                                                                <p:commandLink
                                                                        title="Excluir"
                                                                        onclick="PF('mpProc').show();"
                                                                        process="@this"
                                                                        style="width: 8%"
                                                                        oncomplete="PF('mpProc').hide();PF('excluirAniversario').show();">
                                                                    <i class="fa fa-trash" style="font-size: 15px; color: #A9A9A9;"/>
                                                                    <f:setPropertyActionListener value="#{item[3]}" target="#{aniversarianteFaces.aniversarianteSelected}"/>
                                                                </p:commandLink>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </p:repeat>
                                        </p:outputPanel>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </table>
                </p:outputPanel>
            </h:form>
        </h:body>
        <p:dialog id="modalCadAniversario"
                  widgetVar="modalCadAniversario"
                  resizable="false"
                  width="320"
                  responsive="true"
                  header="Cadastra/Alterar"
                  modal="true">
            <h:form id="formCadAniversario">
                <p:outputPanel id="pnlCadAniversario">
                    <table style="width: 100%" align="center" cellpadding="5" cellspacing="10" border="0">
                        <tr>
                            <td colspan="4">
                                <br/>
                                <br/>
                                <h:panelGroup styleClass="md-inputfield tdCss">
                                    <p:inputText value="#{aniversarianteFaces.aniversarianteSelected.aniNome}"
                                                 id="tipo"
                                                 required="true"
                                                 requiredMessage="Aniversariante é Obrigatório"
                                                 style="text-transform: uppercase; width: 90%"/>
                                    <label>Nome<span style="color: red">*</span></label>
                                </h:panelGroup>
                            </td>
                        </tr>
                        <tr>
                            <td valign="top" style="width: 100px;">
                                <label class="ui-icon-colorTheme">Data<span style="color: red">*</span></label>
                                <br/>
                                <p:calendar id="dataAniv"
                                            required="true"
                                            size="16"
                                            requiredMessage="Vencimento é Obrigatório"
                                            value="#{aniversarianteFaces.aniversarianteSelected.aniDataAniversario}">
                                </p:calendar>
                            </td>
                            <td>
                                <label class="ui-icon-colorTheme">Telefone</label>
                                <br/>
                                <p:inputMask mask="(99) 9 9999-9999"
                                             size="13"
                                             value="#{aniversarianteFaces.aniversarianteSelected.aniTelefone}"/>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="4">
                                <label class="ui-icon-colorTheme">Mensagem</label>
                                <br/>
                                <p:inputTextarea rows="2" cols="5" counter="display"
                                                 maxlength="500"
                                                 style="width: 90%"
                                                 value="#{aniversarianteFaces.aniversarianteSelected.aniMensagem}"
                                                 counterTemplate="{0} caracteres restantes"
                                                 autoResize="true"/>
                                <br/>
                                <h:outputText id="display" class="p-d-block" />
                            </td>
                        </tr>
                        <tr>
                            <td colspan="4" align="center">
                                <p:commandButton value="Salvar"
                                                 styleClass="btnMenor90"
                                                 icon="fa fa-save"
                                                 onclick="PF('mpProc').show();"
                                                 oncomplete="if(!args.validationFailed){PF('modalCadAniversario').hide();rmtAniversariante();}PF('mpProc').hide();"
                                                 update="form:erro"
                                                 ajax="true"
                                                 action="#{aniversarianteFaces.dofinishAddAniversariante}"
                                                 id="btnSalvar">
                                </p:commandButton>
                                <p:commandButton value="Cancelar"
                                                 styleClass="btnMenor90"
                                                 icon="fa fa-repeat"
                                                 onclick="PF('modalCadAniversario').hide();"
                                                 ajax="true"
                                                 id="btnCancelar">
                                </p:commandButton>
                            </td>
                        </tr>
                    </table>
                </p:outputPanel>
            </h:form>
        </p:dialog>
        <h:form>
            <p:growl id="message" showDetail="true" />
            <p:confirmDialog id="excluirAniversario" widgetVar="excluirAniversario"
                             header="Excluir"
                             message="Tem certeza que deseja excluir?"
                             style=" font-size: 13px;"
                             severity="true"
                             showEffect="fade"
                             hideEffect="fade"
                             width="300">
                <p:commandButton value="Sim"
                                 process="@this"
                                 style="font-size: 13px;border:#1976d2!important;"
                                 onclick="PF('mpProc').show();"
                                 oncomplete="PF('excluirAniversario').hide();rmtAniversariante();PF('mpProc').hide();"
                                 actionListener="#{aniversarianteFaces.doRemoveAniversariante}"
                                 icon="ui-icon-check"/>

                <p:commandButton value="Nao"
                                 style=" font-size: 13px;border: #1976d2!important;"
                                 onclick="PF('excluirAniversario').hide();"
                                 icon="ui-icon-close" />
            </p:confirmDialog>
        </h:form>
        <p:overlayPanel
                id="ovlBusca"
                showCloseIcon="true"
                widgetVar="ovlBusca"
                modal="true">
            <h:form id="formOvlBusca">
                <p:outputPanel id="pnlOvlBusca">
                    <table align="center">
                        <tr>
                            <td>
                                <p:inputText value="" size="18" placeholder="digite o nome"/>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="4" align="center">
                                <p:commandButton value="Buscar"
                                                 process="@this"
                                                 styleClass="btnMenor90"
                                                 onclick="PF('mpProc').show();"
                                                 oncomplete="PF('mpProc').hide();"
                                                 icon="fa fa-search"/>

                            </td>
                        </tr>

                    </table>
                </p:outputPanel>
            </h:form>
        </p:overlayPanel>
        <p:dialog id="ovlPicturesChange"
                  widgetVar="ovlPicturesChange"
                  responsive="true"
                  resizable="false"
                  dynamic="true"
                  modal="true"
                  showCloseIcon="true"
                  style="width: 550px;">
            <h:form id="formPicturesChange" enctype="multipart/form-data">
                <p:outputPanel id="pnlPicturesChange">
                    <table style="width: 100%" align="center" cellspacing="5" border="0">
                        <tr>
                            <td colspan="2" align="center">
                                <!--            <p:fileUpload value="#{usuarioFaces.file}" mode="simple"/>-->
                                <!--            <p:commandButton value="Salvar" action="#{usuarioFaces.uploadSalveImagem}" ajax="false"/>-->
                                <p:fileUpload fileUploadListener="#{aniversarianteFaces.upload}"
                                              fileLimit="1" required="true"
                                              requiredMessage="O campo Foto é obrigatório."
                                              style="font-size: 10px;"
                                              fileLimitMessage="Excedido Limite de arquivos"
                                              cancelLabel="Cancelar" label="Procurar"
                                              uploadLabel="Anexar"
                                              invalidSizeMessage="Tamanho excedido(200kb)"
                                              sizeLimit="204800"
                                              invalidFileMessage="Somente arquivos .jpg, .png ou .gif"
                                              allowTypes="/(\.|\/)(gif|jpe?g|png)$/" mode="advanced"
                                              skinSimple="true" />
                                <!-- <p:commandButton value="Enviar" ajax="false" /> -->
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2" align="center">
                                <p:commandButton value="Atualizar foto"
                                                 icon="fa fa-save"
                                                 styleClass="btnMenor90"
                                                 onclick="PF('mpProc').show();"
                                                 oncomplete="if(!args.validationFailed){PF('ovlPicturesChange').hide();}PF('mpProc').hide();rmtAniversariante();"
                                                 ajax="true"
                                                 id="btnatualizaFoto">
                                </p:commandButton>
                            </td>
                        </tr>
                    </table>
                </p:outputPanel>
            </h:form>
        </p:dialog>
    </ui:define>
</ui:composition>